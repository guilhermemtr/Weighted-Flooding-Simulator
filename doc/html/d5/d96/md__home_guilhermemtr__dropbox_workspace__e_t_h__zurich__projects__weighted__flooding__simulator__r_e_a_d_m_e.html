<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Weighted Flooding Simulator: Weighted-Flooding-Simulator</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Weighted Flooding Simulator
   </div>
   <div id="projectbrief">Simulator for message flooding protocols on graphs where nodes (i.e. parties) have weights.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/d96/md__home_guilhermemtr__dropbox_workspace__e_t_h__zurich__projects__weighted__flooding__simulator__r_e_a_d_m_e.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Weighted-Flooding-Simulator </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Simulator for message flooding protocols on graphs where nodes (i.e. parties) have weights. This simulator is intended to evaluate the performance of the <code>WFF</code> protocol given in the paper <a href="https://eprint.iacr.org/2022/608">Practical Provably Secure Flooding for Blockchains.</a>. For more details on the scope of the simulator as well as on the <code>WFF</code> protocol please refer to our <a href="https://eprint.iacr.org/2022/608">paper</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<p >The simulator was implemented in <a href="https://en.wikipedia.org/wiki/C%2B%2B">C++</a>, and makes use of <a href="https://en.wikipedia.org/wiki/OpenMP">OpenMP</a>. The documentation of the code can be found inside the <code>./doc/html</code> folder.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Building &amp; Running The Simulator</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Building The Sources</h2>
<p >We provide a <code>Makefile</code> for compiling the source code of the project. The simulator relies on a library <code>&lt;sys/sysinfo.h&gt;</code> that (to the best of our knowledge) is not available in MacOS. The <code>Makefile</code> allows for compiling three distinct targets:</p><ul>
<li><code>make bench</code> compiles <code><a class="el" href="../../d5/d37/benchmark_8cc.html">benchmark.cc</a></code> (and all other necessary files), generating executable <code>bench-bin</code>. The purpose of this executable is benchmarking the performance of the <code>WFF</code> protocol via simulations (the results of the benchmarks are written to <a href="https://en.wikipedia.org/wiki/Comma-separated_values"><code>.csv</code></a> files). These are the same benchmarks considered in our <a href="https://eprint.iacr.org/2022/608">paper</a>[^1].</li>
<li><code>make kout</code> compiles <code><a class="el" href="../../d9/d0f/main_8cc.html">main.cc</a></code> (and all other necessary files), generating executable <code>kout-bin</code>. This executable allows running the simulator of the <code>WFF</code> protocol where the execution parameters are passed as command-line arguments.</li>
<li><code>make hybrid</code> compiles <code><a class="el" href="../../dd/d96/hybrid__main_8cc.html">hybrid_main.cc</a></code> (and all other necessary files), generating executable <code>hybrid-bin</code>. This executable allows running the simulator of a variant of the <code>WFF</code> protocol (more on this variant below) where the execution parameters are passed as command-line arguments.</li>
</ul>
<p >To cleanup all compilation object files and executables, run <code>make clean</code>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Running The Simulator</h2>
<p >To execute either <code>kout-bin</code> or <code>hybrid-bin</code>, run </p><div class="fragment"><div class="line">./[kout-bin|hybrid-bin] &lt;#runs&gt; &lt;tests (9 bits)&gt; &lt;corrupt_parties&gt; &lt;corruption_threshold in [0,1]&gt; &lt;#min_parties&gt; &lt;#max_parties&gt; &lt;ratio_heavy_light&gt; &lt;#heavy_parties&gt; &lt;to_show (5 bits)&gt; &lt;#min_factor&gt; &lt;#max_factor&gt;</div>
</div><!-- fragment --><p> This will run the simulator on each possible configuration for <code>&lt;#runs&gt;</code> times, each configuration being a different combination of the input parameters. For instance, for </p><div class="fragment"><div class="line">./kout-bin 10 000000001 1 0.5 512 512 1000000 20 a 20 30</div>
</div><!-- fragment --><p> there are only 11 possible configurations, one for the multiplicative factor set to <code>20</code>, another for the multiplicative factor set to <code>21</code>, all the way up to <code>30</code>. In all configurations, the stake distribution is always the constant distribution (meaning all parties have exactly the same stake), parties are corrupted uniformly at random, the corruption threshold is <code>0.5</code> the total stake, there are <code>512</code> parties (both the minimum number of parties and the maximum number of parties is <code>512</code>), and the multiplicative factors vary from 20 (inclusive) to 30 (inclusive). Since for all the configurations the stake distribution is always the constant stake distribution, the parameters <code>1000000 20</code> are ignored, as they represent the ratio between the stake of the heaviest party(ies) and the lightest party(ies) (for more information on the stake distributions, refer to our <a href="https://eprint.iacr.org/2022/608">paper</a>).</p>
<p ><b>Parameter Description</b></p><ul>
<li><code>[kout-bin|hybrid-bin]</code>: Indicates which protocol to simulate; <code>kout-bin</code> simulates the <code>WFF</code> protocol presented in our paper <a href="https://eprint.iacr.org/2022/608">Practical Provably Secure Flooding for Blockchains</a>, whereas <code>hybrid-bin</code> simulates a variant of <code>WFF</code> where parties who did not (yet) get the message query other parties for incoming messages.</li>
<li><code>&lt;#runs&gt;</code>: The number of runs to make for each possible configuration.</li>
<li><code>&lt;tests (9 bits)&gt;</code>: Each bit indicates whether to benchmark the protocol against a certain stake distribution (see below for a list of what each bit means).</li>
<li><code>&lt;corrupt_parties&gt;</code>: If set to <code>0</code> parties are not corrupted; if set to <code>1</code> parties are corrupted in a random fashion; if set to <code>2</code> heavy parties are corrupted first; if set to <code>3</code> light parties are corrupted first.</li>
<li><code>&lt;corruption_threshold in [0,1]&gt;</code>: Indicates the fraction of stake that can be corrupted.</li>
<li><code>&lt;#min_parties&gt;</code> and <code>&lt;#max_parties&gt;</code>: Indicate the minimum and maximum number of parties; both values should be a power of <code>2</code>; the possible numbers of parties are each power of <code>2</code> that is greater or equal to <code>&lt;#min_parties&gt;</code> and smaller or equal to <code>&lt;#max_parties&gt;</code>.</li>
<li><code>&lt;ratio_heavy_light&gt;</code> and <code>&lt;#heavy_parties&gt;</code>: Indicate, respectively, the ratio of stake between the heaviest party(ies) and the lightest party(ies), and the number of heavy parties. Both parameters only apply to Few-Heavy and Exponential stake distributions. The second parameter only applies to Few-Heavy stake distributions.</li>
<li><code>&lt;to_show (5 bits)&gt;</code>: Each bit indicates whether to display certain information when running the protocol on each configuration (see below for a list of possible values). Value <code>a</code> will set all bits to <code>1</code> and thus will make all possible information be output.</li>
<li><code>&lt;#min_factor&gt;</code> and <code>&lt;#max_factor&gt;</code>: Indicates the minimum and maximum multiplicative factors; the possible values for the factor are all integers that are greater or equal to <code>&lt;#min_factor&gt;</code> and smaller or equal to <code>&lt;#max_factor&gt;</code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md5"></a>
Parameter Description: &lt;tt&gt;&lt;tests (9 bits)&gt;&lt;/tt&gt;</h3>
<ul>
<li><code>000000001</code> - Deterministic Constant distribution; all parties have stake <code>1</code>.</li>
<li><code>000000010</code> - Deterministic Few-Heavy distribution, light sender; all light parties have stake <code>1</code>, whereas all heavy parties have stake <code>&lt;ratio_heavy_light&gt;</code>; the sender has stake <code>1</code>; there are <code>&lt;#heavy_parties&gt;</code> parties with stake <code>&lt;ratio_heavy_light&gt;</code>.</li>
<li><code>000000100</code> - Deterministic Few-Heavy distribution, heavy sender; all light parties have stake <code>1</code>, whereas all heavy parties have stake <code>&lt;ratio_heavy_light&gt;</code>; the sender has stake <code>&lt;ratio_heavy_light&gt;</code>; there are <code>&lt;#heavy_parties&gt;</code> parties with stake <code>&lt;ratio_heavy_light&gt;</code>.</li>
<li><code>000001000</code> - Deterministic Exponential distribution, lightest sender; lightest party has stake <code>1000000</code>, second lightest party has stake <code>f * 1000000</code>, third lightest party has stake <code>f * (f * 1000000)</code>, ..., heaviest party has stake <code>&lt;ratio_heavy_light&gt; * 1000000 = f^(&lt;#parties&gt; - 1) * 1000000</code>; the sender has stake <code>1000000</code>.</li>
<li><code>000010000</code> - Deterministic Exponential distribution, median sender; lightest party has stake <code>1000000</code>, second lightest party has stake <code>f * 1000000</code>, third lightest party has stake <code>f * (f * 1000000)</code>, ..., heaviest party has stake <code>&lt;ratio_heavy_light&gt; * 1000000 = f^(&lt;#parties&gt; - 1) * 1000000</code>; the sender has stake <code>f^(&lt;#parties&gt;/2) * 1000000</code>.</li>
<li><code>000100000</code> - Deterministic Exponential distribution, heaviest sender; lightest party has stake <code>1000000</code>, second lightest party has stake <code>f * 1000000</code>, third lightest party has stake <code>f * (f * 1000000)</code>, ..., heaviest party has stake <code>&lt;ratio_heavy_light&gt; * 1000000 = f^(&lt;#parties&gt; - 1) * 1000000</code>; the sender has stake <code>&lt;ratio_heavy_light&gt; * 1000000</code>.</li>
<li><code>001000000</code> - Random Exponential distribution; stakes of each party are picked according to a (random) exponential distribution with parameter <code>&lt;ratio_heavy_light&gt;</code>; the sender is picked uniformly at random.</li>
<li><code>010000000</code> - Random Uniform distribution; stakes of each party are picked according to a (random) uniform distribution with parameters <code>(1,&lt;ratio_heavy_light&gt;+1)</code>; the sender is picked uniformly at random.</li>
<li><code>100000000</code> - Random Geometric distribution; stakes of each party are picked according to a random geometric distribution with parameter <code>&lt;ratio_heavy_light&gt;</code>; the sender is picked uniformly at random.</li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
Parameter Description: &lt;tt&gt;&lt;to_show (5 bits)&gt;&lt;/tt&gt;</h3>
<ul>
<li><code>00001</code> - Show Distribution: shows which (type of) stake distribution is being used for the test being executed.</li>
<li><code>00010</code> - Show Factor: shows which multiplicative factor is being used for the test being executed.</li>
<li><code>00100</code> - Show Success: shows the success rate of the test (i.e. how often all parties received the message).</li>
<li><code>01000</code> - Show Number Of Parties: shows the number of parties for the current test being executed.</li>
<li><code>10000</code> - Show Test: shows the bitstring identifying which (type of) stake distribution is being used for the test being executed.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Running The Benchmarks</h2>
<p >An alternative way for running the simulator is by simply running the benchmarks:</p><ol type="1">
<li>Run <code>./setup-bench clean-all</code> to erase folder <code>./results</code> and all its subfolders.</li>
<li>Run <code>./setup-bench setup</code> to create all necessary directories.</li>
<li>Run <code>./bench-bin</code> to run the benchmarks (beware, depending on the parameters defined in <code><a class="el" href="../../d5/d37/benchmark_8cc.html">benchmark.cc</a></code>, running the benchmarks may take a ==very long time==).</li>
<li>The benchmark results will be stored inside the <code>results</code> folder.\</li>
</ol>
<p >[^1]: One can replicate the results given in our <a href="https://eprint.iacr.org/2022/608">paper</a> by running <code>bench-bin</code>. However, beware replicating our results takes a significant amount of computing time (up to a day on a high end desktop processor [high end with respect to year 2022]). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
